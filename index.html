<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>中学受験 年号クイズ</title>
<style>
body {
  font-family: "Arial Rounded MT Bold", "Helvetica Rounded", sans-serif;
  background: linear-gradient(to bottom, #fff5b1, #ffd966);
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}
#quiz-container {
  width: 90%;
  max-width: 600px;
  margin-top: 50px;
  text-align: center;
}
h1 {
  font-size: 2em;
  margin-bottom: 20px;
}
button.choice {
  font-size: 1.6em;
  font-weight: bold;
  border-radius: 12px;
  padding: 15px 25px;
  margin: 10px 0;
  width: 100%;
  cursor: pointer;
  background-color: #ffd966;
  color: #333;
  border: 2px solid #f4b400;
  transition: all 0.2s;
}
button.choice:hover {
  background-color: #ffe599;
}
button.choice.correct { background-color: #4CAF50; color: white; }
button.choice.wrong { background-color: #f44336; color: white; }
#result {
  display: none;
  margin-top: 20px;
  text-align: left;
}
#result h2 {
  font-size: 1.8em;
  color: #333;
}
.mistake {
  margin: 5px 0;
  padding: 10px;
  background: #fff8dc;
  border-radius: 8px;
  cursor: pointer;
}
.explanation {
  display: none;
  padding: 5px;
  background: #fff2b8;
  border-radius: 5px;
  margin-top: 3px;
}
</style>
</head>
<body>
<div id="quiz-container">
  <h1>中学受験 年号クイズ</h1>
  <div id="question"></div>
  <div id="choices">
    <button class="choice" onclick="handleChoice(0)"></button>
    <button class="choice" onclick="handleChoice(1)"></button>
    <button class="choice" onclick="handleChoice(2)"></button>
    <button class="choice" onclick="handleChoice(3)"></button>
  </div>
  <div id="result"></div>
</div>

<script>
// --- サンプル問題（最初の10問、残りは同様に追加可能） ---
const questions = [
  {q:"明治維新は何年？", choices:[1867,1868,1870,1873], correct:1, explanation:"明治維新は1868年に始まった。"},
  {q:"日清戦争は何年？", choices:[1894,1895,1896,1897], correct:0, explanation:"日清戦争は1894年に勃発。"},
  {q:"日露戦争は何年？", choices:[1902,1903,1904,1905], correct:2, explanation:"日露戦争は1904年に開始。"},
  {q:"関東大震災は何年？", choices:[1922,1923,1924,1925], correct:1, explanation:"関東大震災は1923年。"},
  {q:"第一次世界大戦は何年？", choices:[1912,1914,1916,1918], correct:1, explanation:"第一次世界大戦は1914年から。"},
  {q:"全国水平社設立は何年？", choices:[1922,1923,1924,1925], correct:2, explanation:"全国水平社は1924年に設立。"},
  {q:"世界恐慌は何年？", choices:[1927,1928,1929,1930], correct:2, explanation:"世界恐慌は1929年から始まった。"},
  {q:"治安維持法制定は何年？", choices:[1919,1924,1925,1926], correct:2, explanation:"治安維持法は1925年に成立。"},
  {q:"ロシア革命は何年？", choices:[1916,1917,1918,1919], correct:1, explanation:"ロシア革命は1917年。"},
  {q:"国際連盟設立は何年？", choices:[1918,1919,1920,1921], correct:2, explanation:"国際連盟は1920年に設立。"}
  // 残り290問も同じ形式で追加可能
];

let currentQuestionIndex = 0;
let score = 0;
let startTime = Date.now();

function showQuestion(index){
  const q = questions[index];
  document.getElementById("question").innerText = `Q${index+1}: ${q.q}`;
  const choiceButtons = document.querySelectorAll(".choice");
  for(let i=0;i<4;i++){
    choiceButtons[i].innerText = q.choices[i];
    choiceButtons[i].className = "choice"; // リセット
  }
}

function handleChoice(selectedIndex){
  const choiceButtons = document.querySelectorAll(".choice");
  const q = questions[currentQuestionIndex];

  if(selectedIndex === q.correct){
    choiceButtons[selectedIndex].classList.add("correct");
    score++;
  } else {
    choiceButtons[selectedIndex].classList.add("wrong");
  }

  // 0.8秒後に次の問題へ
  setTimeout(()=>{
    currentQuestionIndex++;
    if(currentQuestionIndex % 10 === 0 || currentQuestionIndex === questions.length){
      showResults();
    } else {
      showQuestion(currentQuestionIndex);
    }
  },800);
}

function showResults(){
  const resultDiv = document.getElementById("result");
  const elapsed = Math.floor((Date.now()-startTime)/1000);
  resultDiv.innerHTML = `<h2>10問ごとの結果</h2>
    <p>正答率：${Math.round(score/currentQuestionIndex*100)}%</p>
    <p>経過時間：${elapsed}秒</p>`;
  
  // 間違えた問題のみ解説
  questions.slice(currentQuestionIndex-10,currentQuestionIndex).forEach((q,i)=>{
    const correctIndex = q.correct;
    const choice = q.choices[correctIndex];
    const div = document.createElement("div");
    div.className = "mistake";
    div.innerText = `Q${currentQuestionIndex-10+i+1}: ${q.q} （正解: ${choice}）`;
    const expl = document.createElement("div");
    expl.className = "explanation";
    expl.innerText = q.explanation;
    div.onclick = ()=>{ expl.style.display = expl.style.display==="none"?"block":"none"; };
    div.appendChild(expl);
    if(questions[currentQuestionIndex-10+i].correct !== correctIndex){
      resultDiv.appendChild(div);
    }
  });

  resultDiv.style.display = "block";

  if(currentQuestionIndex<questions.length){
    setTimeout(()=>{
      showQuestion(currentQuestionIndex);
      resultDiv.style.display = "none";
    },2000);
  }
}

// 初期表示
showQuestion(currentQuestionIndex);
</script>
</body>
</html>
